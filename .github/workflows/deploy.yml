name: Deploy Flutter Web App

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    # - name: Check out code
    #   uses: actions/checkout@v2

    # - name: Set up Flutter
    #   uses: subosito/flutter-action@v2
    #   with:
    #     flutter-version: '3.0.0'  # استبدل بالإصدار المناسب
    #     channel: stable
    #     architecture: x64
    #     cache: false
    #     pub-cache-path: default
    #     dry-run: false

    # - name: Upgrade Flutter
    #   run: flutter upgrade

    # - name: Install dependencies
    #   run: flutter pub get

    # - name: Run tests
    #   run: flutter test

    # - name: Clean build
    #   run: flutter clean

    # - name: Build web
    #   run: flutter build web

    - name: Install lftp
      run: sudo apt-get install -y lftp

    - name: Upload to Hostinger
      env:
        HOSTINGER_USERNAME: ${{ secrets.HOSTINGER_USERNAME }}
        HOSTINGER_PASSWORD: ${{ secrets.HOSTINGER_PASSWORD }}
      run: |
        lftp -f "
        set ftp:ssl-verify off
        set ftp:passive-mode on  
        open -u $HOSTINGER_USERNAME,$HOSTINGER_PASSWORD ftp://92.113.18.5
        mkdir /awfer_offers_dash 
        bye
        "
