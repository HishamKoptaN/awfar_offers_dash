name: Deploy Flutter Web App

on:
  push:
    branches:
      - main  # ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨

jobs:
  web-deploy:
    name: ğŸ‰ Deploy
    runs-on: ubuntu-latest

    steps:
    - name: ğŸšš Get latest code
      uses: actions/checkout@v4

    - name: ğŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5
      with:
        server: ftp.awfar-offers.com
        username: ${{ secrets.HOSTINGER_USERNAME }}
        password: ${{ secrets.HOSTINGER_PASSWORD }}  # ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„ ØµØ­ÙŠØ­
        local-dir: lib/  # ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø±ÙØ¹Ù‡Ø§
        server-dir: /awfer_offers_dash  # ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø¹ÙŠØ¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨

    - name: ğŸ”„ Create Test Directory
      run: |
        lftp -f "
        open -u ${{ secrets.HOSTINGER_USERNAME }},${{ secrets.HOSTINGER_PASSWORD }} ftp://ftp.awfar-offers.com
        mkdir -p /awfer_offers_dash/test_directory  # ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©
        bye
        "


# on:
#   push:
#     branches:
#       - main

# jobs:
#   build-and-deploy:
#     runs-on: ubuntu-latest
#     steps:
    # - name: Check out code
    #   uses: actions/checkout@v2

    # - name: Set up Flutter
    #   uses: subosito/flutter-action@v2
    #   with:
    #     flutter-version: '3.0.0'  # Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
    #     channel: stable
    #     architecture: x64
    #     cache: false
    #     pub-cache-path: default
    #     dry-run: false

    # - name: Upgrade Flutter
    #   run: flutter upgrade

    # - name: Install dependencies
    #   run: flutter pub get

    # - name: Run tests
    #   run: flutter test

    # - name: Clean build
    #   run: flutter clean

    # - name: Build web
    #   run: flutter build web

    # - name: Install lftp
    #   run: sudo apt-get install -y lftp

    # - name: Upload to Hostinger
    #   env:
    #     HOSTINGER_USERNAME: ${{ secrets.HOSTINGER_USERNAME }}
    #     HOSTINGER_PASSWORD: ${{ secrets.HOSTINGER_PASSWORD }}
    #   run: |
    #     lftp -f "
    #     set ftp:ssl-verify off
    #     set ftp:passive-mode on  
    #     open -u $HOSTINGER_USERNAME,$HOSTINGER_PASSWORD https://awfar-offers.com/
    #     mkdir /awfer_offers_dash 
    #     bye
    #     "
